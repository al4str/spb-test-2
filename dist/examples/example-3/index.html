<div class="chat-box" data-chatid="123"></div>

<script>(function() {
  const Widget = Object.create({
    create(chatId) {
      const wdg = document.createElement("div");
      wdg.classList.add("chat-box");
      wdg.innerHTML = `<h1>Chat: ${ chatId }</h1>`;
      // Load your chat data into UI
      return wdg;
    }
  });
  const initWhenReady = () => {
    removeEventListener("DOMContentLoaded", initWhenReady);
    Array.prototype.forEach.call(document.querySelectorAll(".chat-box"), ele => {
      const myWidgetInstance = Widget.create(ele.dataset.chatid);
      ele.appendChild(myWidgetInstance);
    });
  };
  addEventListener('DOMContentLoaded', initWhenReady);
})();</script>